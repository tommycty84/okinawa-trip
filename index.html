<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>咿呀莎莎 - 沖繩五日遊</title>
    <!-- 引入 Tailwind CSS 與 FontAwesome -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;500;700&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --primary: #0d9488;
            --bg-base: #f8fafc;
        }
        
        body {
            font-family: 'Noto Sans TC', sans-serif;
            background-color: var(--bg-base);
            -webkit-overflow-scrolling: touch;
            padding-bottom: 90px;
        }

        .no-scrollbar::-webkit-scrollbar { display: none; }

        .nav-glass {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(12px);
            border-top: 1px solid #e2e8f0;
            padding-bottom: env(safe-area-inset-bottom);
        }

        .nav-item.active {
            color: var(--primary);
            font-weight: 700;
        }
        
        .section-view {
            display: none;
            animation: fadeIn 0.3s ease-out;
        }
        .section-view.active { display: block; }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* 編輯模式 */
        .edit-mode .editable-text {
            border: 1px dashed #94a3b8;
            background: #f1f5f9;
            padding: 2px 4px;
            border-radius: 4px;
        }
        
        .edit-controls { display: none; }
        .edit-mode .edit-controls { display: flex; gap: 8px; margin-top: 8px; }
        
        .add-btn-area { display: none; }
        .edit-mode .add-btn-area { display: block; margin-top: 12px; }

        .mapcode-tag {
            font-family: monospace;
            background-color: #fff7ed;
            color: #c2410c;
            padding: 2px 6px;
            border-radius: 4px;
            font-size: 0.75rem;
            border: 1px solid #ffedd5;
            display: inline-block;
        }
    </style>
</head>
<body class="text-slate-800">

    <div id="app" class="mx-auto max-w-md bg-white min-h-screen shadow-2xl relative">

        <!-- 設定按鈕 -->
        <button onclick="toggleSettings()" class="fixed top-4 right-4 z-50 w-10 h-10 bg-white/80 backdrop-blur rounded-full shadow-lg flex items-center justify-center text-slate-600 border border-slate-100">
            <i class="fas fa-cog"></i>
        </button>

        <!-- 1. 首頁 (Home) -->
        <section id="view-home" class="section-view active">
            <div class="relative h-screen flex flex-col justify-center items-center text-center p-6">
                <div class="absolute inset-0 z-0">
                    <img id="cover-img" src="https://images.unsplash.com/photo-1542051841857-5f90071e7989?q=80&w=800&auto=format&fit=crop" class="w-full h-full object-cover brightness-75">
                </div>
                <div class="relative z-10 text-white space-y-4">
                    <p class="text-sm font-light tracking-[0.3em] uppercase editable-text">Okinawa Trip</p>
                    <h1 class="text-5xl font-bold leading-tight editable-text">咿呀莎莎<br>沖繩自駕行</h1>
                    <div class="w-16 h-1 bg-teal-400 mx-auto rounded-full"></div>
                    <p class="text-lg font-medium editable-text">2025.02.01 - 02.05</p>
                    <button onclick="switchTab('view-itinerary')" class="mt-8 px-8 py-3 bg-white/20 backdrop-blur-md border border-white/40 rounded-full text-sm font-bold active:scale-95 transition">開始旅程</button>
                </div>
            </div>
        </section>

        <!-- 2. 行程 (Itinerary) -->
        <section id="view-itinerary" class="section-view">
            <div class="sticky top-0 z-20 bg-white/95 backdrop-blur border-b border-slate-100 px-4 py-3 shadow-sm">
                <h2 class="text-lg font-bold text-teal-700">每日行程表</h2>
            </div>

            <div class="p-4 space-y-8 pb-24" id="itinerary-content">
                
                <!-- Day 1 -->
                <div class="day-block">
                    <div class="flex items-center gap-3 mb-4">
                        <div class="w-10 h-10 rounded-xl bg-teal-100 text-teal-700 flex items-center justify-center font-bold text-sm">D1</div>
                        <div>
                            <h3 class="font-bold text-slate-800 editable-text">2/1 (五) 抵達與那霸</h3>
                            <p class="text-xs text-slate-500 editable-text">宿：沖縄サンプラザホテル</p>
                        </div>
                    </div>
                    <div class="space-y-3 item-list">
                        <div class="item-card bg-white border border-slate-100 rounded-xl p-4 shadow-sm relative">
                            <h4 class="font-bold text-slate-700 editable-text">航班抵達那霸機場</h4>
                            <p class="text-xs text-slate-500 mt-1 editable-text">虎航 IT232 (20:40) / 華航 CI0122 (19:20)</p>
                            <p class="text-[10px] text-amber-600 mt-2 bg-amber-50 inline-block px-2 py-1 rounded editable-text">預計 21:30 出關</p>
                            <div class="edit-controls"><button onclick="moveItem(this, -1)">▲</button><button onclick="moveItem(this, 1)">▼</button><button onclick="deleteItem(this)">刪除</button></div>
                        </div>
                        <div class="item-card bg-white border border-slate-100 rounded-xl p-4 shadow-sm relative">
                            <div class="flex justify-between items-start">
                                <div>
                                    <h4 class="font-bold text-slate-700 editable-text">飯店 Check-in</h4>
                                    <p class="text-xs text-slate-500 mt-1 editable-text">那霸市區，牧志站步行 7 分鐘</p>
                                </div>
                                <a href="https://www.google.com/maps/search/?api=1&query=Okinawa+Sun+Plaza+Hotel" target="_blank" class="text-blue-500 bg-blue-50 p-2 rounded-lg text-xs font-bold whitespace-nowrap"><i class="fas fa-location-arrow"></i></a>
                            </div>
                            <div class="edit-controls"><button onclick="moveItem(this, -1)">▲</button><button onclick="moveItem(this, 1)">▼</button><button onclick="deleteItem(this)">刪除</button></div>
                        </div>
                        <div class="item-card bg-white border border-slate-100 rounded-xl p-4 shadow-sm relative">
                            <h4 class="font-bold text-slate-700 editable-text">國際通散策與晚餐</h4>
                            <p class="text-xs text-slate-500 mt-1 editable-text">素食店已關，阿嬤需自行覓食。逛屋台村與唐吉軻德。</p>
                            <div class="edit-controls"><button onclick="moveItem(this, -1)">▲</button><button onclick="moveItem(this, 1)">▼</button><button onclick="deleteItem(this)">刪除</button></div>
                        </div>
                    </div>
                </div>

                <!-- Day 2 -->
                <div class="day-block pt-6 border-t border-slate-100">
                    <div class="flex items-center gap-3 mb-4">
                        <div class="w-10 h-10 rounded-xl bg-teal-100 text-teal-700 flex items-center justify-center font-bold text-sm">D2</div>
                        <div>
                            <h3 class="font-bold text-slate-800 editable-text">2/2 (六) 中部自駕</h3>
                            <p class="text-xs text-slate-500 editable-text">宿：GREEN HOUSE (民宿)</p>
                        </div>
                    </div>
                    <div class="space-y-3 item-list">
                        <div class="item-card bg-white border border-slate-100 rounded-xl p-4 shadow-sm relative">
                            <h4 class="font-bold text-slate-700 editable-text">飯店早餐 -> 領取租車</h4>
                            <p class="text-xs text-slate-500 mt-1 editable-text">享用早餐後，領車前往浦添市民宿放行李。</p>
                            <div class="edit-controls"><button onclick="moveItem(this, -1)">▲</button><button onclick="moveItem(this, 1)">▼</button><button onclick="deleteItem(this)">刪除</button></div>
                        </div>
                        <div class="item-card bg-white border border-slate-100 rounded-xl p-4 shadow-sm relative">
                            <div class="flex justify-between items-start">
                                <div>
                                    <h4 class="font-bold text-slate-700 editable-text">港川外人住宅</h4>
                                    <p class="text-xs text-slate-500 mt-1 editable-text">文青小店、咖啡廳散策。</p>
                                    <span class="mapcode-tag mt-1">33 341 066*00</span>
                                </div>
                                <a href="https://www.google.com/maps/search/?api=1&query=港川外人住宅" target="_blank" class="text-blue-500 bg-blue-50 p-2 rounded-lg text-xs font-bold whitespace-nowrap"><i class="fas fa-location-arrow"></i></a>
                            </div>
                            <div class="edit-controls"><button onclick="moveItem(this, -1)">▲</button><button onclick="moveItem(this, 1)">▼</button><button onclick="deleteItem(this)">刪除</button></div>
                        </div>
                        <div class="item-card bg-white border border-slate-100 rounded-xl p-4 shadow-sm relative">
                            <div class="flex justify-between items-start">
                                <div>
                                    <h4 class="font-bold text-slate-700 editable-text">永旺來客夢 AEON MALL</h4>
                                    <p class="text-xs text-slate-500 mt-1 editable-text">逛寶可夢中心與大型賣場。</p>
                                    <span class="mapcode-tag mt-1">33 530 406*45</span>
                                </div>
                                <a href="https://www.google.com/maps/search/?api=1&query=AEON+MALL+Okinawa+Rycom" target="_blank" class="text-blue-500 bg-blue-50 p-2 rounded-lg text-xs font-bold whitespace-nowrap"><i class="fas fa-location-arrow"></i></a>
                            </div>
                            <div class="edit-controls"><button onclick="moveItem(this, -1)">▲</button><button onclick="moveItem(this, 1)">▼</button><button onclick="deleteItem(this)">刪除</button></div>
                        </div>
                        <div class="item-card bg-white border border-slate-100 rounded-xl p-4 shadow-sm relative">
                            <div class="flex justify-between items-start">
                                <div>
                                    <h4 class="font-bold text-slate-700 editable-text">北谷美國村</h4>
                                    <p class="text-xs text-slate-500 mt-1 editable-text">看夕陽、逛街與晚餐。</p>
                                    <span class="mapcode-tag mt-1">33 525 382*47</span>
                                </div>
                                <a href="https://www.google.com/maps/search/?api=1&query=American+Village+Okinawa" target="_blank" class="text-blue-500 bg-blue-50 p-2 rounded-lg text-xs font-bold whitespace-nowrap"><i class="fas fa-location-arrow"></i></a>
                            </div>
                            <div class="edit-controls"><button onclick="moveItem(this, -1)">▲</button><button onclick="moveItem(this, 1)">▼</button><button onclick="deleteItem(this)">刪除</button></div>
                        </div>
                    </div>
                </div>

                <!-- Day 3 -->
                <div class="day-block pt-6 border-t border-slate-100">
                    <div class="flex items-center gap-3 mb-4">
                        <div class="w-10 h-10 rounded-xl bg-teal-100 text-teal-700 flex items-center justify-center font-bold text-sm">D3</div>
                        <div>
                            <h3 class="font-bold text-slate-800 editable-text">2/3 (日) 北部之美</h3>
                            <p class="text-xs text-slate-500 editable-text">萬座毛 & 水族館</p>
                        </div>
                    </div>
                    <div class="space-y-3 item-list">
                        <div class="item-card bg-white border border-slate-100 rounded-xl p-4 shadow-sm relative">
                            <div class="flex justify-between items-start">
                                <div>
                                    <h4 class="font-bold text-slate-700 editable-text">萬座毛 (Manzamo)</h4>
                                    <span class="mapcode-tag mt-1">206 312 039*17</span>
                                </div>
                                <a href="https://www.google.com/maps/search/?api=1&query=Manzamo" target="_blank" class="text-blue-500 bg-blue-50 p-2 rounded-lg text-xs font-bold whitespace-nowrap"><i class="fas fa-location-arrow"></i></a>
                            </div>
                            <div class="edit-controls"><button onclick="moveItem(this, -1)">▲</button><button onclick="moveItem(this, 1)">▼</button><button onclick="deleteItem(this)">刪除</button></div>
                        </div>
                        <div class="item-card bg-white border border-slate-100 rounded-xl p-4 shadow-sm relative">
                            <div class="flex justify-between items-start">
                                <div>
                                    <h4 class="font-bold text-slate-700 editable-text">美麗海水族館</h4>
                                    <p class="text-xs text-slate-500 mt-1 editable-text">建議午餐後進館，下午人較少。</p>
                                    <span class="mapcode-tag mt-1">553 075 797*77</span>
                                </div>
                                <a href="https://www.google.com/maps/search/?api=1&query=美麗海水族館" target="_blank" class="text-blue-500 bg-blue-50 p-2 rounded-lg text-xs font-bold whitespace-nowrap"><i class="fas fa-location-arrow"></i></a>
                            </div>
                            <div class="edit-controls"><button onclick="moveItem(this, -1)">▲</button><button onclick="moveItem(this, 1)">▼</button><button onclick="deleteItem(this)">刪除</button></div>
                        </div>
                        <div class="item-card bg-white border border-slate-100 rounded-xl p-4 shadow-sm relative">
                            <h4 class="font-bold text-slate-700 editable-text">名護晚餐 或 返程 Parco City</h4>
                            <p class="text-xs text-slate-500 mt-1 editable-text">依回程路況與體力決定用餐地點。</p>
                            <div class="edit-controls"><button onclick="moveItem(this, -1)">▲</button><button onclick="moveItem(this, 1)">▼</button><button onclick="deleteItem(this)">刪除</button></div>
                        </div>
                    </div>
                </div>

                <!-- Day 4 -->
                <div class="day-block pt-6 border-t border-slate-100">
                    <div class="flex items-center gap-3 mb-4">
                        <div class="w-10 h-10 rounded-xl bg-teal-100 text-teal-700 flex items-center justify-center font-bold text-sm">D4</div>
                        <div>
                            <h3 class="font-bold text-slate-800 editable-text">2/4 (一) 南部文化</h3>
                            <p class="text-xs text-slate-500 editable-text">鐘乳石洞與點燈</p>
                        </div>
                    </div>
                    <div class="space-y-3 item-list">
                        <div class="item-card bg-white border border-slate-100 rounded-xl p-4 shadow-sm relative">
                            <div class="flex justify-between items-start">
                                <div>
                                    <h4 class="font-bold text-slate-700 editable-text">沖繩世界 (玉泉洞)</h4>
                                    <span class="mapcode-tag mt-1">232 495 330*28</span>
                                </div>
                                <a href="https://www.google.com/maps/search/?api=1&query=Okinawa+World" target="_blank" class="text-blue-500 bg-blue-50 p-2 rounded-lg text-xs font-bold whitespace-nowrap"><i class="fas fa-location-arrow"></i></a>
                            </div>
                            <div class="edit-controls"><button onclick="moveItem(this, -1)">▲</button><button onclick="moveItem(this, 1)">▼</button><button onclick="deleteItem(this)">刪除</button></div>
                        </div>
                        <div class="item-card bg-white border border-slate-100 rounded-xl p-4 shadow-sm relative">
                            <h4 class="font-bold text-slate-700 editable-text">午餐：なんと屋</h4>
                            <p class="text-xs text-green-700 font-bold mt-1 editable-text">★ 園區內，有素食套餐</p>
                            <div class="edit-controls"><button onclick="moveItem(this, -1)">▲</button><button onclick="moveItem(this, 1)">▼</button><button onclick="deleteItem(this)">刪除</button></div>
                        </div>
                        <div class="item-card bg-white border border-slate-100 rounded-xl p-4 shadow-sm relative">
                            <h4 class="font-bold text-slate-700 editable-text">Outlet 或 iias 購物</h4>
                            <p class="text-xs text-slate-500 mt-1 editable-text">Ashibinaa 逛精品 或 iias 豐崎逛 DMM。</p>
                            <div class="edit-controls"><button onclick="moveItem(this, -1)">▲</button><button onclick="moveItem(this, 1)">▼</button><button onclick="deleteItem(this)">刪除</button></div>
                        </div>
                        <div class="item-card bg-white border border-slate-100 rounded-xl p-4 shadow-sm relative">
                            <div class="flex justify-between items-start">
                                <div>
                                    <h4 class="font-bold text-slate-700 editable-text">八重瀨公園</h4>
                                    <p class="text-xs text-slate-500 mt-1 editable-text">傍晚看點燈賞櫻。</p>
                                </div>
                                <a href="https://www.google.com/maps/search/?api=1&query=Yaese+Park" target="_blank" class="text-blue-500 bg-blue-50 p-2 rounded-lg text-xs font-bold whitespace-nowrap"><i class="fas fa-location-arrow"></i></a>
                            </div>
                            <div class="edit-controls"><button onclick="moveItem(this, -1)">▲</button><button onclick="moveItem(this, 1)">▼</button><button onclick="deleteItem(this)">刪除</button></div>
                        </div>
                    </div>
                </div>

                <!-- Day 5 -->
                <div class="day-block pt-6 border-t border-slate-100">
                    <div class="flex items-center gap-3 mb-4">
                        <div class="w-10 h-10 rounded-xl bg-teal-100 text-teal-700 flex items-center justify-center font-bold text-sm">D5</div>
                        <div>
                            <h3 class="font-bold text-slate-800 editable-text">2/5 (二) 賦歸之路</h3>
                            <p class="text-xs text-slate-500 editable-text">那霸 -> 機場</p>
                        </div>
                    </div>
                    <div class="space-y-3 item-list">
                        <div class="item-card bg-white border border-slate-100 rounded-xl p-4 shadow-sm relative">
                            <div class="flex justify-between items-start">
                                <div>
                                    <h4 class="font-bold text-slate-700 editable-text">波上宮</h4>
                                    <span class="mapcode-tag mt-1">33 185 022*00</span>
                                </div>
                                <a href="https://www.google.com/maps/search/?api=1&query=Naminoue+Shrine" target="_blank" class="text-blue-500 bg-blue-50 p-2 rounded-lg text-xs font-bold whitespace-nowrap"><i class="fas fa-location-arrow"></i></a>
                            </div>
                            <div class="edit-controls"><button onclick="moveItem(this, -1)">▲</button><button onclick="moveItem(this, 1)">▼</button><button onclick="deleteItem(this)">刪除</button></div>
                        </div>
                        <div class="item-card bg-white border border-slate-100 rounded-xl p-4 shadow-sm relative">
                            <div class="flex justify-between items-start">
                                <div>
                                    <h4 class="font-bold text-slate-700 editable-text">瀨長島 Umikaji Terrace</h4>
                                    <span class="mapcode-tag mt-1">33 002 602*06</span>
                                </div>
                                <a href="https://www.google.com/maps/search/?api=1&query=Umikaji+Terrace" target="_blank" class="text-blue-500 bg-blue-50 p-2 rounded-lg text-xs font-bold whitespace-nowrap"><i class="fas fa-location-arrow"></i></a>
                            </div>
                            <div class="edit-controls"><button onclick="moveItem(this, -1)">▲</button><button onclick="moveItem(this, 1)">▼</button><button onclick="deleteItem(this)">刪除</button></div>
                        </div>
                        <div class="item-card bg-slate-800 text-white rounded-xl p-4 shadow-sm">
                            <h4 class="font-bold editable-text">前往那霸機場</h4>
                            <p class="text-xs opacity-75 mt-1 editable-text">17:00 前抵達。虎航 IT233 (18:40) / ANA 1216 (19:15)</p>
                        </div>
                    </div>
                </div>

            </div>
        </section>

        <!-- 3. 住宿 (Stay) -->
        <section id="view-stay" class="section-view">
            <div class="sticky top-0 z-20 bg-white/95 backdrop-blur border-b border-slate-100 px-4 py-3 shadow-sm">
                <h2 class="text-lg font-bold text-teal-700">住宿資訊</h2>
            </div>
            <div class="p-4 space-y-4">
                <div class="bg-white p-5 rounded-xl border border-slate-100 shadow-sm">
                    <h3 class="font-bold text-lg text-slate-800 editable-text">沖縄サンプラザホテル</h3>
                    <p class="text-xs text-slate-500 mt-2 editable-text">2/1 (一晚) / 牧志站步行距離 / 098-868-2222</p>
                    <a href="https://www.google.com/maps/search/?api=1&query=Okinawa+Sun+Plaza+Hotel" target="_blank" class="block w-full text-center py-2 mt-4 bg-teal-50 text-teal-700 rounded-lg text-xs font-bold">查看地圖</a>
                </div>
                <div class="bg-white p-5 rounded-xl border border-slate-100 shadow-sm">
                    <h3 class="font-bold text-lg text-slate-800 editable-text">GREEN HOUSE 民宿</h3>
                    <p class="text-xs text-slate-500 mt-2 editable-text">2/2 - 2/5 (三晚) / 靠港川外人住宅 / 浦添市</p>
                    <a href="https://www.google.com/maps/search/?api=1&query=Green+House+Okinawa" target="_blank" class="block w-full text-center py-2 mt-4 bg-teal-50 text-teal-700 rounded-lg text-xs font-bold">查看地圖</a>
                </div>
            </div>
        </section>

        <!-- 4. 餐廳 (Food) -->
        <section id="view-food" class="section-view">
            <div class="sticky top-0 z-20 bg-white/95 backdrop-blur border-b border-slate-100 px-4 py-3 shadow-sm">
                <h2 class="text-lg font-bold text-teal-700">素食/特選餐廳</h2>
            </div>
            <div class="p-4 space-y-4">
                <div class="bg-white p-4 rounded-xl border-l-4 border-teal-500 shadow-sm">
                    <h3 class="font-bold text-slate-800 editable-text">なんと屋 (Day 4 午餐)</h3>
                    <p class="text-xs text-slate-500 mt-1 editable-text">位於沖繩世界內，提供精緻的全素套餐。</p>
                </div>
                <div class="bg-white p-4 rounded-xl border-l-4 border-teal-500 shadow-sm">
                    <h3 class="font-bold text-slate-800 editable-text">Transit Café (中部)</h3>
                    <p class="text-xs text-slate-500 mt-1 editable-text">海景美式餐廳，素食需主動向 Staff 詢問客製義大利麵。</p>
                </div>
                <div class="bg-white p-4 rounded-xl border-l-4 border-teal-500 shadow-sm">
                    <h3 class="font-bold text-slate-800 editable-text">Hale Noa Café (名護)</h3>
                    <p class="text-xs text-slate-500 mt-1 editable-text">美式早午餐，可客製素食。適合水族館行程前用餐。</p>
                </div>
                <div class="bg-white p-4 rounded-xl border-l-4 border-teal-500 shadow-sm">
                    <h3 class="font-bold text-slate-800 editable-text">金壺食堂 (那霸)</h3>
                    <p class="text-xs text-slate-500 mt-1 editable-text">台灣老闆娘開的，全素自助餐 ¥600，必推素粽。</p>
                </div>
            </div>
        </section>

        <!-- 5. 地圖 (Map) -->
        <section id="view-map" class="section-view">
            <div class="sticky top-0 z-20 bg-white/95 backdrop-blur border-b border-slate-100 px-4 py-3 shadow-sm">
                <h2 class="text-lg font-bold text-teal-700">MapCode 速查</h2>
            </div>
            <div class="p-4 space-y-2">
                <div class="bg-white p-3 rounded-lg border flex justify-between items-center text-sm">
                    <span class="font-bold text-slate-700">美麗海水族館</span>
                    <span class="mapcode-tag">553 075 797*77</span>
                </div>
                <div class="bg-white p-3 rounded-lg border flex justify-between items-center text-sm">
                    <span class="font-bold text-slate-700">萬座毛</span>
                    <span class="mapcode-tag">206 312 039*17</span>
                </div>
                <div class="bg-white p-3 rounded-lg border flex justify-between items-center text-sm">
                    <span class="font-bold text-slate-700">美國村</span>
                    <span class="mapcode-tag">33 525 382*47</span>
                </div>
                <div class="bg-white p-3 rounded-lg border flex justify-between items-center text-sm">
                    <span class="font-bold text-slate-700">永旺來客夢</span>
                    <span class="mapcode-tag">33 530 406*45</span>
                </div>
                <div class="bg-white p-3 rounded-lg border flex justify-between items-center text-sm">
                    <span class="font-bold text-slate-700">玉泉洞</span>
                    <span class="mapcode-tag">232 495 330*28</span>
                </div>
                <div class="bg-white p-3 rounded-lg border flex justify-between items-center text-sm">
                    <span class="font-bold text-slate-700">波上宮</span>
                    <span class="mapcode-tag">33 185 022*00</span>
                </div>
                <div class="bg-white p-3 rounded-lg border flex justify-between items-center text-sm">
                    <span class="font-bold text-slate-700">瀨長島</span>
                    <span class="mapcode-tag">33 002 602*06</span>
                </div>
            </div>
        </section>

        <!-- 導航列 -->
        <nav class="fixed bottom-0 w-full max-w-md nav-glass flex justify-around items-center pt-2 text-[10px] text-slate-400 z-40 shadow-[0_-2px_10px_rgba(0,0,0,0.05)]">
            <button onclick="switchTab('view-home')" class="nav-item active flex flex-col items-center p-2 w-1/5"><i class="fas fa-home text-xl mb-1"></i>首頁</button>
            <button onclick="switchTab('view-itinerary')" class="nav-item flex flex-col items-center p-2 w-1/5"><i class="fas fa-calendar-alt text-xl mb-1"></i>行程</button>
            <button onclick="switchTab('view-stay')" class="nav-item flex flex-col items-center p-2 w-1/5"><i class="fas fa-bed text-xl mb-1"></i>住宿</button>
            <button onclick="switchTab('view-food')" class="nav-item flex flex-col items-center p-2 w-1/5"><i class="fas fa-utensils text-xl mb-1"></i>餐廳</button>
            <button onclick="switchTab('view-map')" class="nav-item flex flex-col items-center p-2 w-1/5"><i class="fas fa-map-marked-alt text-xl mb-1"></i>地圖</button>
        </nav>

        <!-- 設定 Modal -->
        <div id="settings-modal" class="fixed inset-0 z-[60] hidden">
            <div class="absolute inset-0 bg-black/50 backdrop-blur-sm" onclick="toggleSettings()"></div>
            <div class="absolute bottom-0 left-0 right-0 bg-white rounded-t-2xl p-8 shadow-2xl animate-slide-up">
                <div class="w-12 h-1 bg-slate-200 rounded-full mx-auto mb-6"></div>
                <h3 class="text-xl font-bold mb-6">手冊管理</h3>
                <div class="space-y-4">
                    <div class="flex items-center justify-between p-4 bg-slate-50 rounded-xl">
                        <span class="font-bold text-slate-700">內容編輯模式</span>
                        <label class="relative inline-flex items-center cursor-pointer">
                            <input type="checkbox" id="edit-toggle" class="sr-only peer" onchange="toggleEditMode(this.checked)">
                            <div class="w-11 h-6 bg-slate-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-teal-600"></div>
                        </label>
                    </div>
                    <div class="p-4 border border-teal-100 bg-teal-50 rounded-xl">
                        <h4 class="font-bold text-sm text-teal-800 mb-1">匯出已修改網頁</h4>
                        <p class="text-[10px] text-teal-600 mb-3">修改完成後，請點擊下載，並重新上傳至 GitHub。</p>
                        <button onclick="exportHTML()" class="w-full py-3 bg-teal-600 text-white rounded-xl font-bold shadow-sm active:scale-95 transition-transform"><i class="fas fa-download mr-2"></i>下載 index.html</button>
                    </div>
                </div>
            </div>
        </div>

    </div>

    <script>
        function switchTab(viewId) {
            document.querySelectorAll('.section-view').forEach(el => el.classList.remove('active'));
            document.querySelectorAll('.nav-item').forEach(el => el.classList.remove('active'));
            document.getElementById(viewId).classList.add('active');
            const map = { 'view-home':0, 'view-itinerary':1, 'view-stay':2, 'view-food':3, 'view-map':4 };
            document.querySelectorAll('.nav-item')[map[viewId]].classList.add('active');
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function toggleSettings() {
            document.getElementById('settings-modal').classList.toggle('hidden');
        }

        function toggleEditMode(isEditing) {
            document.body.classList.toggle('edit-mode', isEditing);
            document.querySelectorAll('.editable-text').forEach(el => el.contentEditable = isEditing);
        }

        function moveItem(btn, dir) {
            const card = btn.closest('.item-card');
            const container = card.parentNode;
            if (dir === -1 && card.previousElementSibling) container.insertBefore(card, card.previousElementSibling);
            else if (dir === 1 && card.nextElementSibling) container.insertBefore(card.nextElementSibling, card);
        }

        function deleteItem(btn) {
            if(confirm('確定刪除？')) btn.closest('.item-card').remove();
        }

        function exportHTML() {
            const wasEditing = document.getElementById('edit-toggle').checked;
            if (wasEditing) toggleEditMode(false);
            document.getElementById('settings-modal').classList.add('hidden');
            const html = `<!DOCTYPE html>\n<html lang="zh-TW">\n${document.head.outerHTML}\n<body>\n${document.body.innerHTML}\n</body>\n</html>`;
            const blob = new Blob([html], { type: 'text/html' });
            const a = document.createElement('a');
            a.href = URL.createObjectURL(blob);
            a.download = 'index.html';
            a.click();
            if (wasEditing) toggleEditMode(true);
        }
    </script>
</body>
</html>

